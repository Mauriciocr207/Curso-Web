{"version":3,"sources":["ponentes.js"],"names":["ponentesInput","document","querySelector","ponentes","ponentesFiltrados","listadoPonentes","ponenteHidden","seleccionarPonente","e","ponente","target","ponentePrevio","classList","remove","add","value","dataset","idPonente","textContent","async","respuesta","fetch","arrayPonentes","map","nombre","trim","apellido","id","filter","parseInt","ponenteHtml","createElement","appendChild","mostrarPonenteInicio","formatearPonentes","json","obtenerPonentes","addEventListener","busqueda","length","expresion","RegExp","toLowerCase","search","firstChild","removeChild","forEach","onclick","noResultados","mostrarPonentes"],"mappings":"AAAA,MACI,MAAMA,EAAgBC,SAASC,cAAc,aAC7C,GAAIF,EAAgB,CAChB,IAAIG,EAAW,GACXC,EAAoB,GAExB,MAAMC,EAAkBJ,SAASC,cAAc,qBACzCI,EAAgBL,SAASC,cAAc,sBAoF7C,SAASK,EAAmBC,GACxB,MAAMC,EAAUD,EAAEE,OAEZC,EAAgBV,SAASC,cAAc,4CAC1CS,GACCA,EAAcC,UAAUC,OAAO,2CAEnCJ,EAAQG,UAAUE,IAAI,2CACtBR,EAAcS,MAAQN,EAAQO,QAAQC,UACtCjB,EAAce,MAAQN,EAAQS,aAvFlCC,iBACI,MACMC,QAAkBC,MADZ,kBAMhB,SAA2BC,EAAgB,IACvCnB,EAAWmB,EAAcC,IAAKd,IAClB,CACJe,OAAQ,GAAGf,EAAQe,OAAOC,UAAUhB,EAAQiB,SAASD,SACrDE,GAAIlB,EAAQkB,MAKpBxB,EAASyB,OAAQnB,IACVA,EAAQkB,KAAOE,SAASvB,EAAcS,SACrCf,EAAce,MAAQN,EAAQe,OAmD1C,SAA8Bf,GAC1B,MAAMqB,EAAc7B,SAAS8B,cAAc,MAC3CD,EAAYlB,UAAUE,IAAI,2CAC1BgB,EAAYZ,YAAcT,EAAQe,OAClCM,EAAYd,QAAQC,UAAYR,EAAQkB,GAExCtB,EAAgB2B,YAAYF,GAxDpBG,CAAqBxB,MAf7ByB,OADwBd,EAAUe,QARtCC,GAGApC,EAAcqC,iBAAiB,SA2B/B,SAAwB7B,GACpB,MAAM8B,EAAW9B,EAAEE,OAAOK,MAE1B,GAAGuB,EAASC,OAAS,EAAG,CACpB,MAAMC,EAAY,IAAIC,OAAOH,EAAU,KACvClC,EAAoBD,EAASyB,OAAQnB,IACjC,IAAsD,GAAnDA,EAAQe,OAAOkB,cAAcC,OAAOH,GACnC,OAAO/B,SAIfL,EAAoB,IAK5B,WACI,KAAMC,EAAgBuC,YAClBvC,EAAgBwC,YAAYxC,EAAgBuC,YAGhD,GAAGxC,EAAkBmC,OAAS,EAC1BnC,EAAkB0C,QAASrC,IACvB,MAAMqB,EAAc7B,SAAS8B,cAAc,MAC3CD,EAAYlB,UAAUE,IAAI,6BAC1BgB,EAAYZ,YAAcT,EAAQe,OAClCM,EAAYd,QAAQC,UAAYR,EAAQkB,GACxCG,EAAYiB,QAAUxC,EAGtBF,EAAgB2B,YAAYF,SAE7B,CACH,MAAMkB,EAAe/C,SAAS8B,cAAc,KAC5CiB,EAAapC,UAAUE,IAAI,kCAC3BkC,EAAa9B,YAAc,iBAG3Bb,EAAgB2B,YAAYgB,IAzBhCC,QAnDZ","file":"ponentes.js","sourcesContent":["(() => {\r\n    const ponentesInput = document.querySelector('#ponentes');\r\n    if( ponentesInput ) {\r\n        let ponentes = [];\r\n        let ponentesFiltrados = [];\r\n\r\n        const listadoPonentes = document.querySelector('#listado-ponentes');\r\n        const ponenteHidden = document.querySelector('[name=\"id_ponente\"');      \r\n        obtenerPonentes();\r\n\r\n        \r\n        ponentesInput.addEventListener('input', buscarPonentes);\r\n\r\n        async function obtenerPonentes() {\r\n            const url = `/api/ponentes`;\r\n            const respuesta = await fetch(url);\r\n            const resultado = await respuesta.json();\r\n            formatearPonentes(resultado);\r\n        }\r\n\r\n        function formatearPonentes(arrayPonentes = []) {\r\n            ponentes = arrayPonentes.map( ponente => {\r\n                return  {\r\n                    nombre: `${ponente.nombre.trim()} ${ponente.apellido.trim()}`,\r\n                    id: ponente.id,\r\n                }\r\n            });\r\n\r\n            // Condiciones iniciales\r\n            ponentes.filter( ponente => {\r\n                if(ponente.id === parseInt(ponenteHidden.value)) {\r\n                    ponentesInput.value = ponente.nombre;\r\n                    mostrarPonenteInicio(ponente);\r\n                }\r\n            })\r\n\r\n        }\r\n\r\n        function buscarPonentes(e) {\r\n            const busqueda = e.target.value;\r\n            \r\n            if(busqueda.length > 1) {\r\n                const expresion = new RegExp(busqueda, \"i\");\r\n                ponentesFiltrados = ponentes.filter( ponente => {\r\n                    if(ponente.nombre.toLowerCase().search(expresion) != -1) {\r\n                        return ponente;\r\n                    }\r\n                });\r\n            } else {\r\n                ponentesFiltrados = [];\r\n            }\r\n            mostrarPonentes();\r\n        }\r\n\r\n        function mostrarPonentes() {\r\n            while(listadoPonentes.firstChild) {\r\n                listadoPonentes.removeChild(listadoPonentes.firstChild);\r\n            }\r\n\r\n            if(ponentesFiltrados.length > 0) {\r\n                ponentesFiltrados.forEach( ponente => {\r\n                    const ponenteHtml = document.createElement('LI');\r\n                    ponenteHtml.classList.add('listado-ponentes__ponente');\r\n                    ponenteHtml.textContent = ponente.nombre;\r\n                    ponenteHtml.dataset.idPonente = ponente.id;\r\n                    ponenteHtml.onclick = seleccionarPonente;\r\n    \r\n                    // añadir al dom\r\n                    listadoPonentes.appendChild(ponenteHtml);\r\n                });\r\n            } else {\r\n                const noResultados = document.createElement('P');\r\n                noResultados.classList.add('listado-ponentes__no-resultado');\r\n                noResultados.textContent = \"Sin resultados\";\r\n\r\n                // añadir al dom\r\n                listadoPonentes.appendChild(noResultados);\r\n            }\r\n\r\n            \r\n        }\r\n\r\n        function mostrarPonenteInicio(ponente) {\r\n            const ponenteHtml = document.createElement('LI');\r\n            ponenteHtml.classList.add('listado-ponentes__ponente--seleccionado');\r\n            ponenteHtml.textContent = ponente.nombre;\r\n            ponenteHtml.dataset.idPonente = ponente.id;\r\n            // añadir al dom\r\n            listadoPonentes.appendChild(ponenteHtml);\r\n        }\r\n\r\n        function seleccionarPonente(e) {\r\n            const ponente = e.target;\r\n            // Remover la clase previa\r\n            const ponentePrevio = document.querySelector('.listado-ponentes__ponente--seleccionado');\r\n            if(ponentePrevio) {\r\n                ponentePrevio.classList.remove('listado-ponentes__ponente--seleccionado');\r\n            }\r\n            ponente.classList.add('listado-ponentes__ponente--seleccionado');\r\n            ponenteHidden.value = ponente.dataset.idPonente;\r\n            ponentesInput.value = ponente.textContent;\r\n        }\r\n    }\r\n})();"]}